<!doctype html><html lang=en><head><title>Learning Sed Is Beneficial For Linux Users :: Kn â€” Anything that's software</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="Sed for beginner"><meta name=keywords content="sed,linux"><meta name=robots content="noodp"><link rel=canonical href=/posts/sed/><link rel=stylesheet href=/assets/style.css><link rel=stylesheet href=/assets/green.css><link rel=stylesheet href=/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><meta name=twitter:card content="summary"><meta name=twitter:title content="Learning Sed Is Beneficial For Linux Users :: Kn â€” Anything that's software"><meta name=twitter:description content="Sed for beginner"><meta name=twitter:site content="/"><meta name=twitter:creator content><meta name=twitter:image content="/posts/sed/hesedshesed.jpg"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Learning Sed Is Beneficial For Linux Users :: Kn â€” Anything that's software"><meta property="og:description" content="Sed for beginner"><meta property="og:url" content="/posts/sed/"><meta property="og:site_name" content="Learning Sed Is Beneficial For Linux Users"><meta property="og:image" content="/posts/sed/hesedshesed.jpg"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-10-20 12:44:26 +0000 UTC"><link href=/blog/prism-onedark.css rel=stylesheet></head><body class=en><div class=container><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Kn</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=https://huyhoang8398.github.io>about</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>english â–¾</li></ul><ul class="language-selector__more hidden"><li><a href=/>english</a></li><li><a href=/vi/>viet</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=https://huyhoang8398.github.io>about</a></li><hr><li><a href=/>english</a></li><li><a href=/vi/>viet</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=/posts/sed/>Learning Sed Is Beneficial For Linux Users</a></h1><div class=post-meta><span class=post-date>2021-10-20</span>
<span class=post-author>::
<a href=/authors/kn/>Do Hoang</a></span></div><span class=post-tags><a href=/tags/linux/>#linux</a>&nbsp;
<a href=/tags/sed/>#sed</a>&nbsp;</span>
<img src=/posts/sed/hesedshesed.jpg class=post-cover><div class=post-content><p>One of the most important command line utility in Linux is <code>sed</code> which is a stream editor.
A stream editor is used to perform basic text transformations on an input stream (a file or input from a pipeline).</p><p>Essentially what it can do is it allows you to search for String of text or specific pattern and then replace it pattern with whatever you tell sed to replace with, so it is really kind of search and replace function.</p><h3 id=basic-sed-substitution-s>Basic sed substitution &lsquo;s&rsquo;</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed <span style=color:#e6db74>&#39;s/find/replace/&#39;</span> &lt;oldfile &gt;newfile
</code></pre></div><p>So we are telling sed that go search for the word <code>find</code> then replace it with the word <code>replace</code> and what it does is it searches every lines for its first instance of the word <code>find</code>. So it not gonna replace every instances of <code>find</code>, only the first time it appears on each line from <code>oldfile</code> and then writes it to <code>newfile</code>.</p><p>Sometimes you want to replace every <code>find</code> in <code>oldfile</code> you just need to add global substitution <code>g</code> for every instances <code>find</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed <span style=color:#e6db74>&#39;s/find/replace/g&#39;</span> &lt;oldfile &gt;newfile
</code></pre></div><p>But What if you just want to take a file, change it then write to that same file, you could use <code>-i</code> flag.
It will replace all occurrences of a string in a file, overwriting the file (i.e. in-place):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed -i <span style=color:#e6db74>&#39;s/find/replace/g&#39;</span> filename
</code></pre></div><p>You are not often doing this as far taking input from a file and then taking the output and write to new file. Probably most of the time, you take the output from other shell command and pipe it to <code>sed</code> command. For example:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;Thank Do Hoang&#34;</span> | sed <span style=color:#e6db74>&#39;s/Ho/W/&#39;</span>
Thank Do Wang
</code></pre></div><p>Other basic usage:</p><ul><li>To replace only on lines matching the line pattern:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed <span style=color:#e6db74>&#39;/line_pattern/s/find/replace/&#39;</span> filename
</code></pre></div><ul><li>Delete lines matching the line pattern:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed <span style=color:#e6db74>&#39;/line_pattern/d&#39;</span> filename
</code></pre></div><ul><li>Print the first 11 lines of a file:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed 11q filename
</code></pre></div><ul><li>Apply multiple find-replace expressions to a file:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed -e <span style=color:#e6db74>&#39;s/find/replace/&#39;</span> -e <span style=color:#e6db74>&#39;s/find/replace/&#39;</span> filename
</code></pre></div><ul><li>Replace separator <code>/</code> by any other character not used in the find or replace patterns, e.g. <code>#</code>:</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed <span style=color:#e6db74>&#39;s#find#replace#&#39;</span> filename
</code></pre></div><p>What if I want to search for multiple pattern?</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /etc/shells | sed -e <span style=color:#e6db74>&#39;s/usr/u/g&#39;</span> -e <span style=color:#e6db74>&#39;s/bin/b/g&#39;</span>
</code></pre></div><p>Sed is not picky about the symbol that you use for the separator in the
command, if you dont want to use the /, you can use pretty much any others kind of special symbol that you can think of as long as it is not part of the search pattern.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /etc/shells | sed -e <span style=color:#e6db74>&#39;s|usr|u|g&#39;</span> -e <span style=color:#e6db74>&#39;s#bin#b#g&#39;</span>
</code></pre></div><p>You can also print specific line that match the search pattern ( kind of <code>grep</code> )</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat /etc/shells | sed -n <span style=color:#e6db74>&#39;/usr/p&#39;</span>
</code></pre></div><p>The cool trick about <code>sed</code> is to go and delete extra spaces at the end of the line, for example</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed -i <span style=color:#e6db74>&#39;s/ *$//&#39;</span> test.sh
</code></pre></div><p>It will search for every lines that has spaces at the end of it and replace it with nothing (basically deleting them).
How about <strong>tabs</strong>?</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed -i <span style=color:#e6db74>&#39;s/[[:space:]]*$//&#39;</span> test.sh
</code></pre></div><p><strong>empty lines?</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat test.sh | sed <span style=color:#e6db74>&#39;/^$/d&#39;</span>
</code></pre></div><p>First the <code>^</code> is the begining of the line then the <code>$</code> symbol is the end of the line ( find every pattern that match the begining of the line, and the end of the line and there is nothing between it - so that means that line is empty ).</p><p>You can also replace all the lowercase characters with uppercase characters for fun ðŸ™ƒ</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed <span style=color:#e6db74>&#39;s/[a-z]\/U&amp;/g&#39;</span> test.sh // uppercase
sed <span style=color:#e6db74>&#39;s/[a-z]\/L&amp;/g&#39;</span> test.sh // lowercase
</code></pre></div><p>C&rsquo;est tout, merci kn ðŸ™ƒ</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=/posts/esaip-29052021/><span class=button__text>CTF ESAIP HACK CHALLENGE 4th edition - 29 Mai 2021 Final Writeup Box Pentest Corovid</span>
<span class=button__icon>â†’</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>Â© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script><script src=/assets/prism.js></script></div></body></html>